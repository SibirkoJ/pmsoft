<!DOCTYPE html>
<html>
    <title>Приходи</title>
    <meta charset ="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">

    <body>

        <div id="myTopnav" class="topnav" >

            <img src="Images/llv_logo_header.png"/>
            <h2>ProPMS</h2>
            
            &nbsp;<span id="ctl00_Header1_lblUser" style="font-weight:bold; color: white;">Потребител: Касиер 510</span>
        
            <div>
                <a class="empty"></a>
                <a href="objects.html">Обекти</a>
                <a href="daily.html">Дневен Отчет</a>
                <a href="login.html">Изход</a> <!-- logout.php--> 
                <a href="javascript:void(0);" style="font-size:20px;" class="icon" onclick="myFunction()">&#x2631;</a>
            </div>
        </div>


            <script>
                function myFunction() {
                    var x = document.getElementById("myTopnav");
                    if (x.className === "topnav") {
                        x.className += " responsive";
                    } else {
                        x.className = "topnav";
                    }
                }
            </script>

        <div id="mainContent" class="incomePageMainContent">
            
            <div id="incomeWindow" >
                
                <div id="newIncomeTitle">Нов Приход</div>
                
                <div class="incomeForm">
                
                <p>Сграда: Българска Морава №54, Вход: 1, Обект №1... </p>  <!-- да бъде заменео с бек енд с ID за точната сграда -->    
                    
                
                <div id="unpaid">     
                
                    <p><b>Неплатени Разходи</b></p>

                    <div id="avans">
                    
                        Аванс <input type="checkbox">
                    
                    </div>
                    
                        <table>
                            <thead>
                                <tr>
                                    <th>№</th>
                                    <th>Разход</th>
                                    <th>Период</th>
                                    <th>Сума (лв)</th>
                                    <th><input type="checkbox" onclick="toggle(this);"></th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="25.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="210.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="81.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="34.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="25.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                                <tr>
                                    <td>6</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="50.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                                <tr>
                                    <td>7</td>
                                    <td>Месечна такса</td>
                                    <td>01.10.2017 - 31.10.2017</td>
                                    <td><input type="text" value="40.00" class="amount"></td>
                                    <td><input type="checkbox" class="amountCheck"></td>
                                </tr>
                            </tbody>
                        </table><br>                    

                        <label for="all"><b>Общо:</b></label>
                        <input type="text" id="total"
                       style="background-color: transparent; margin: 0; text-align: right; width: 70px; border: 0; margin-left: 110px;"><br>
                    
                        <label for="name">Плащане:</label>
                        <input type="text" id="total1" readonly style="width: 160px;">
                        
                        <div id="incomeContentPaymentInTotal">
                            <label for="paymentFrom">Плащане от:</label>
                            <input type="text" id="" style="width: 120px;">
                        </div>    
                    
                    <!-- script for the sum of values in the table-->
                    
                    <script language="JavaScript" type="text/javascript" src="js/jquery-2.1.4.min.js">
                        $(function() {

                          function getTotal(isInit) {

                            var total = 0;
                            var selector = isInit ? ".amount" : ".amountCheck:checked";
                            $(selector).each(function() {
                              total += parseInt($(this).val());
                            });
                            //$("#tot_amount").val(sum.toFixed(3));

                            if (total == 0) {
                              $('#total1').val('');
                            } else {
                              $('#total1').val(total);
                            }

                          }

                           $(".amount").click(function(event) {
                             getTotal();
                          });
                          getTotal(true);

                        });
                    </script>
                    
                    
                </div>    
                    
                <form action="/action_page.php">    
                    <div class="formDivs">
                        <label for="method">Начин за плащане</label><br>
                        <select name="paymentMethod" style="width: 150px;">
                                <option value="cash">В брой</option>
                                <option value="bank">Банков път</option>
                                <option value="card">Карта</option>
                                <option value="E-Pay">E-Pay</option>
                        </select>
                    </div>
                    
                    <div class="formDivs">
                        <label for="date">Дата за плащане</label><br>
                        <input type="date" id="theDate" style="width: 130px;">
                        
                        <script>
                        
                            var date = new Date();

                            var day = date.getDate();
                            var month = date.getMonth() + 1;
                            var year = date.getFullYear();

                            if (month < 10) month = "0" + month;
                            if (day < 10) day = "0" + day;

                            var today = year + "-" + month + "-" + day;       
                            document.getElementById("theDate").value = today;

                        </script>
                        
                    </div>
                    
                    <div class="formDivs">
                        <label for="avans">Аванс (разполагаем)</label><br>
                        <label for="avans">0.00лв</label>
                    </div>
                        
                    <div class="formDiv">
                        <label for="details">Детайли зa плащане</label>
                        <textarea id="subject" name="subject" placeholder=""></textarea>
                    </div>
                    
                    
                    <div class="formDiv">
                        <label for="doc">Документ</label>
                        <textarea></textarea>
                        <!-- add the php scrip for uploading a file in here example: https://www.w3schools.com/php/php_file_upload.asp --> 
                    </div>
                    
                    <input type="button" id="" value="Отказ">
                    <input type="button" id="btnSubmitIncome" value="Запази">
                    
                </form>
                
                </div>
                
            </div>

            <div id="myModal" class="modal">

              <div class="modal-content">
                <p>Искате ли да разпечатате ПКО?</p>
                <input type="button" class="confirmIncome" value="Да-Мобилен принт"><br>
                <input type="button" class="closeIncome" onclick="closeIncomeModal()" value="Отказ">
              </div>

            </div>

            <script language="JavaScript" type="text/javascript">
                // Get the modal
                var modal = document.getElementById('myModal');

                // Get the button that opens the modal
                var btn = document.getElementById("btnSubmitIncome");

                // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks the button, open the modal 
                btn.onclick = function() {
                    modal.style.display = "block";
                }

                // When the user clicks on <span> (x), close the modal
                function closeIncomeModal() {
                    modal.style.display = "none";
                }

                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }
                
                function toggle(source) {
                    var checkboxes = document.querySelectorAll('tbody input[type="checkbox"]');
                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i] != source)
                            checkboxes[i].checked = source.checked;
                    }
                }
            </script>

            
        </div>
        
    </body>
    
     <footer>
        <img src="Images/llv_logo_small.png"/>
        <p style="font-size: 70%;">Powered by LLV Technology Ltd. &copy; 2009 - 2017 All rights reserved.</p>
    </footer>
    
</html>
